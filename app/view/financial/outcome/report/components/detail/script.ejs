<script>
  async function outcomeDetail(outcome_id) {
    const outcome = await API.response(Outcome.findById, outcome_id);
    if (!outcome) { return false; }

    console.log(outcome);

    lib.display("outcome-detail-box", "");
    window.scrollTo(0, document.getElementById("outcome-detail-box").getBoundingClientRect().top - document.body.getBoundingClientRect().top);

    let detail_div = document.getElementById("outcome-detail-div");
    detail_div.innerHTML = "";

    detail_div.append(lib.element.create("div", { class: "box b1 lucida-grande bold center" }, `Dados da saída: ${outcome.id}`));
    detail_div.append(lib.element.createInfo("mobile-box b6 em09 border padding-5 margin-top-5", "Saída", outcome.id));
    detail_div.append(lib.element.createInfo("mobile-box b6 em09 border padding-5 margin-top-5", "Despesa", outcome.expense_id));
    detail_div.append(lib.element.createInfo("mobile-box b3 em09 border padding-5 margin-top-5", "Status", outcome.expense_id));
    detail_div.append(lib.element.createInfo("mobile-box b3 em09 border padding-5 margin-top-5", "Despesa", lib.timestampToDate(outcome.datetime)));
    detail_div.append(lib.element.createInfo("mobile-box b3 em09 border padding-5 margin-top-5", "Categoria", outcome.category_name));
    detail_div.append(lib.element.createInfo("mobile-box b3 em09 border padding-5 margin-top-5", "Origem", outcome.origin_name));
    detail_div.append(lib.element.createInfo("mobile-box b3 em09 border padding-5 margin-top-5", "Usuário", outcome.user_name));
    detail_div.append(lib.element.createInfo("mobile-box b3-4 em09 border padding-5 margin-top-5", "Método de pagamento", outcome.payment_method));
    detail_div.append(lib.element.createInfo("mobile-box b4 em09 border padding-5 margin-top-5", "Valor da despesa", outcome.cost.toFixed(2)));
    if (outcome.payment_method == "Boleto") {
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "Beneficiário", outcome.billet_receiver));
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5 wrap", "Código de barras", outcome.billet_code));
    } else if (outcome.payment_method == "Pix") {
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "Recebedor", outcome.pix_receiver));
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "Chave", outcome.pix_key));
    } else if (outcome.payment_method == "Transferência bancária") {
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "CPF/CNPJ", outcome.transfer_receiver));
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "CPF/CNPJ", outcome.transfer_register));
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "Banco", outcome.transfer_bank));
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "Agência", outcome.transfer_agency));
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "Nº Conta", outcome.transfer_account));
      detail_div.append(lib.element.createInfo("mobile-box b2 em09 border padding-5 margin-top-5", "Tipo de conta", outcome.transfer_account_type));
    }

    if (outcome.approval_date) {
      detail_div.append(lib.element.createInfo("mobile-box b3 em09 border padding-5 margin-top-5", "Data da aprovação", lib.timestampToDate(outcome.approval_date)));
      detail_div.append(lib.element.createInfo("mobile-box b2-3 em09 border padding-5 margin-top-5", "Aprovada por", outcome.approval_user_name));
    }

    if (outcome.payment_date) {
      detail_div.append(lib.element.createInfo("mobile-box b3 em09 border padding-5 margin-top-5", "Data do pagamento", lib.timestampToDate(outcome.payment_date)));
      detail_div.append(lib.element.createInfo("mobile-box b2-3 em09 border padding-5 margin-top-5", "Pago por", outcome.payment_user_name));
    }

    detail_div.append(lib.element.createInfo("mobile-box b1 em09 border padding-5 margin-top-5 pre-wrap", "Descrição", outcome.description));
  };
</script>