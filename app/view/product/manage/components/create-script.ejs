<script>
	document.getElementById("product-create-form").addEventListener("submit", async (event) => {
		event.preventDefault();

		let product = {
			id: event.target.elements.namedItem("id").value,
			code: event.target.elements.namedItem("code").value,
			name: event.target.elements.namedItem("name").value,
			color: event.target.elements.namedItem("color").value,
			size: event.target.elements.namedItem("size").value,
			weight: event.target.elements.namedItem("weight").value,
			brand: event.target.elements.namedItem("brand").value,
			image: event.target.elements.namedItem("image").value,
			video: event.target.elements.namedItem("video").value,
			status: event.target.elements.namedItem("status").value,
			description: event.target.elements.namedItem("description").value,
			announcement: event.target.elements.namedItem("announcement").value
		};

		product = await API.response(Product.save, product);
		if(!product){ return false };

		event.target.elements.namedItem("id").value = "";
		event.target.elements.namedItem("code").value = "";
		event.target.elements.namedItem("name").value = "";
		event.target.elements.namedItem("color").value = "";
		event.target.elements.namedItem("size").value = "";
		event.target.elements.namedItem("weight").value = "";
		event.target.elements.namedItem("brand").value = "";
		event.target.elements.namedItem("image").value = "";
		event.target.elements.namedItem("video").value = "";
		event.target.elements.namedItem("status").value = "";
		event.target.elements.namedItem("description").value = "";
		event.target.elements.namedItem("announcement").value = "";
	});

	async function productEdit (id) {
		let product = await API.response(Product.findById, id);
		if(!product){ return false };

		document.getElementById('product-create-form').elements.namedItem("id").value = product.id;
		document.getElementById('product-create-form').elements.namedItem("name").value = product.name;
		document.getElementById('product-create-form').elements.namedItem("code").value = product.code;
		document.getElementById('product-create-form').elements.namedItem("color").value = product.color;
		document.getElementById('product-create-form').elements.namedItem("size").value = product.size;
		document.getElementById('product-create-form').elements.namedItem("weight").value = product.weight;
		document.getElementById('product-create-form').elements.namedItem("brand").value = product.brand;
		document.getElementById('product-create-form').elements.namedItem("image").value = product.image;
		document.getElementById('product-create-form').elements.namedItem("video").value = product.video;
		document.getElementById('product-create-form').elements.namedItem("status").value = product.status;
		document.getElementById('product-create-form').elements.namedItem("description").value = product.description;
		document.getElementById('product-create-form').elements.namedItem("announcement").value = product.announcement;
	};

	async function productDelete (product_id) {
		let r = confirm('Deseja realmente excluir o produto? Atenção, essa ação não pode ser desfeita!');
		if(r){
			if(!await API.response(Product.delete, product_id)){ return false; };
			document.getElementById("product-filter-form").submit.click();
		}
	};
</script>